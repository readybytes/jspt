<?xml version="1.0" ?>
<!-- $Id: build.xml shyam $	 
	1. data is there in dir.tmp// proj.locations
	2. just build the part and put at right location
	
 -->
<project name="XIPT System Plugin" basedir="." default="build" description="Phing build script for JSPT system plugin.">

	<target name="config" description="Load configuration file">
		<property file="plg_xipt_system.properties"  override="true" />
	</target>

	<target name="build" description="Build Installable XiPT System Plugin " depends="config">
		<echo msg="Building the XiPT system plugin...." />
		<reflexive>
			<fileset dir="${dir.tmp}">
			     <include name="**/*.*" />
			</fileset>
			 <filterchain>
				<replacetokens>
				    <token key="global.version" 		value="${global.version}" />
				    <token key="svn.lastrevision"   		value="${svn.lastrevision}" />
				</replacetokens>
			</filterchain>
		</reflexive>


		<phpcodesniffer
			standard="Zend"
			format="summary"
			showSniffs="true"
			file="${dir.tmp}"
			sniffs="Zend_Sniffs_Files_ClosingTagSniff 
					Generic_Sniffs_PHP_DisallowShortOpenTagSniff
				   "
			allowedFileExtensions="php" />

		<delete file="${dir.packages}/${file.package}${svn.lastrevision}${file.extension}" />

		<zip	destfile="${dir.packages}/${file.package}${svn.lastrevision}${file.extension}" 
			basedir="${dir.tmp}"  />
	</target>
</project>
